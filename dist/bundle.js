!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){"use strict";function e(t,e){var n,r,o,i,l=E;for(i=arguments.length;i-- >2;)T.push(arguments[i]);for(e&&null!=e.children&&(T.length||T.push(e.children),delete e.children);T.length;)if((r=T.pop())&&void 0!==r.pop)for(i=r.length;i--;)T.push(r[i]);else"boolean"==typeof r&&(r=null),(o="function"!=typeof t)&&(null==r?r="":"number"==typeof r?r+="":"string"!=typeof r&&(o=!1)),o&&n?l[l.length-1]+=r:l===E?l=[r]:l.push(r),n=o;var u=new S;return u.nodeName=t,u.children=l,u.attributes=null==e?void 0:e,u.key=null==e?void 0:e.key,void 0!==P.vnode&&P.vnode(u),u}function n(t,e){for(var n in e)t[n]=e[n];return t}function o(t,e){t&&("function"==typeof t?t(e):t.current=e)}function i(t){!t.__d&&(t.__d=!0)&&1==A.push(t)&&(P.debounceRendering||B)(l)}function l(){for(var t;t=A.pop();)t.__d&&w(t)}function u(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&a(t,e.nodeName):n||t._componentConstructor===e.nodeName}function a(t,e){return t.__n===e||t.nodeName.toLowerCase()===e.toLowerCase()}function c(t){var e=n({},t.attributes);e.children=t.children;var r=t.nodeName.defaultProps;if(void 0!==r)for(var o in r)void 0===e[o]&&(e[o]=r[o]);return e}function f(t){var e=t.parentNode;e&&e.removeChild(t)}function s(t,e,n,i,l){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)o(n,null),o(i,t);else if("class"!==e||l)if("style"===e){if(i&&"string"!=typeof i&&"string"!=typeof n||(t.style.cssText=i||""),i&&"object"==r(i)){if("string"!=typeof n)for(var u in n)u in i||(t.style[u]="");for(var u in i)t.style[u]="number"==typeof i[u]&&!1===N.test(u)?i[u]+"px":i[u]}}else if("dangerouslySetInnerHTML"===e)i&&(t.innerHTML=i.__html||"");else if("o"==e[0]&&"n"==e[1]){var a=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),i?n||t.addEventListener(e,p,a):t.removeEventListener(e,p,a),(t.__l||(t.__l={}))[e]=i}else if("list"!==e&&"type"!==e&&!l&&e in t){try{t[e]=null==i?"":i}catch(t){}null!=i&&!1!==i||"spellcheck"==e||t.removeAttribute(e)}else{var c=l&&e!==(e=e.replace(/^xlink:?/,""));null==i||!1===i?c?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof i&&(c?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),i):t.setAttribute(e,i))}else t.className=i||""}function p(t){return this.__l[t.type](P.event&&P.event(t)||t)}function h(){for(var t;t=I.shift();)P.afterMount&&P.afterMount(t),t.componentDidMount&&t.componentDidMount()}function y(t,e,n,r,o,i){H++||(U=null!=o&&void 0!==o.ownerSVGElement,M=null!=t&&!("__preactattr_"in t));var l=d(t,e,n,r,i);return o&&l.parentNode!==o&&o.appendChild(l),--H||(M=!1,i||h()),l}function d(t,e,n,r,o){var i=t,l=U;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||o)?t.nodeValue!=e&&(t.nodeValue=e):(i=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(i,t),v(t,!0))),i.__preactattr_=!0,i;var u=e.nodeName;if("function"==typeof u)return k(t,e,n,r);if(U="svg"===u||"foreignObject"!==u&&U,u+="",(!t||!a(t,u))&&(i=function(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.__n=t,n}(u,U),t)){for(;t.firstChild;)i.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(i,t),v(t,!0)}var c=i.firstChild,f=i.__preactattr_,s=e.children;if(null==f){f=i.__preactattr_={};for(var p=i.attributes,h=p.length;h--;)f[p[h].name]=p[h].value}return!M&&s&&1===s.length&&"string"==typeof s[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=s[0]&&(c.nodeValue=s[0]):(s&&s.length||null!=c)&&b(i,s,n,r,M||null!=f.dangerouslySetInnerHTML),m(i,e.attributes,f),U=l,i}function b(t,e,n,r,o){var i,l,a,c,s,p=t.childNodes,h=[],y={},b=0,g=0,m=p.length,_=0,O=e?e.length:0;if(0!==m)for(var j=0;j<m;j++){var w=p[j],k=w.__preactattr_;null!=(C=O&&k?w._component?w._component.__k:k.key:null)?(b++,y[C]=w):(k||(void 0!==w.splitText?!o||w.nodeValue.trim():o))&&(h[_++]=w)}if(0!==O)for(j=0;j<O;j++){var C;if(s=null,null!=(C=(c=e[j]).key))b&&void 0!==y[C]&&(s=y[C],y[C]=void 0,b--);else if(g<_)for(i=g;i<_;i++)if(void 0!==h[i]&&u(l=h[i],c,o)){s=l,h[i]=void 0,i===_-1&&_--,i===g&&g++;break}s=d(s,c,n,r),a=p[j],s&&s!==t&&s!==a&&(null==a?t.appendChild(s):s===a.nextSibling?f(a):t.insertBefore(s,a))}if(b)for(var j in y)void 0!==y[j]&&v(y[j],!1);for(;g<=_;)void 0!==(s=h[_--])&&v(s,!1)}function v(t,e){var n=t._component;n?C(n):(null!=t.__preactattr_&&o(t.__preactattr_.ref,null),!1!==e&&null!=t.__preactattr_||f(t),g(t))}function g(t){for(t=t.lastChild;t;){var e=t.previousSibling;v(t,!0),t=e}}function m(t,e,n){var r;for(r in n)e&&null!=e[r]||null==n[r]||s(t,r,n[r],n[r]=void 0,U);for(r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||s(t,r,n[r],n[r]=e[r],U)}function _(t,e,n){var r,o=D.length;for(t.prototype&&t.prototype.render?(r=new t(e,n),x.call(r,e,n)):((r=new x(e,n)).constructor=t,r.render=O);o--;)if(D[o].constructor===t)return r.__b=D[o].__b,D.splice(o,1),r;return r}function O(t,e,n){return this.constructor(t,n)}function j(t,e,n,r,l){t.__x||(t.__x=!0,t.__r=e.ref,t.__k=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||l?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r)),r&&r!==t.context&&(t.__c||(t.__c=t.context),t.context=r),t.__p||(t.__p=t.props),t.props=e,t.__x=!1,0!==n&&(1!==n&&!1===P.syncComponentUpdates&&t.base?i(t):w(t,1,l)),o(t.__r,t))}function w(t,e,r,o){if(!t.__x){var i,l,u,a=t.props,f=t.state,s=t.context,p=t.__p||a,d=t.__s||f,b=t.__c||s,g=t.base,m=t.__b,O=g||m,k=t._component,x=!1,S=b;if(t.constructor.getDerivedStateFromProps&&(f=n(n({},f),t.constructor.getDerivedStateFromProps(a,f)),t.state=f),g&&(t.props=p,t.state=d,t.context=b,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(a,f,s)?x=!0:t.componentWillUpdate&&t.componentWillUpdate(a,f,s),t.props=a,t.state=f,t.context=s),t.__p=t.__s=t.__c=t.__b=null,t.__d=!1,!x){i=t.render(a,f,s),t.getChildContext&&(s=n(n({},s),t.getChildContext())),g&&t.getSnapshotBeforeUpdate&&(S=t.getSnapshotBeforeUpdate(p,d));var T,E,B=i&&i.nodeName;if("function"==typeof B){var N=c(i);(l=k)&&l.constructor===B&&N.key==l.__k?j(l,N,1,s,!1):(T=l,t._component=l=_(B,N,s),l.__b=l.__b||m,l.__u=t,j(l,N,0,s,!1),w(l,1,r,!0)),E=l.base}else u=O,(T=k)&&(u=t._component=null),(O||1===e)&&(u&&(u._component=null),E=y(u,i,s,r||!g,O&&O.parentNode,!0));if(O&&E!==O&&l!==k){var A=O.parentNode;A&&E!==A&&(A.replaceChild(E,O),T||(O._component=null,v(O,!1)))}if(T&&C(T),t.base=E,E&&!o){for(var U=t,M=t;M=M.__u;)(U=M).base=E;E._component=U,E._componentConstructor=U.constructor}}for(!g||r?I.push(t):x||(t.componentDidUpdate&&t.componentDidUpdate(p,d,S),P.afterUpdate&&P.afterUpdate(t));t.__h.length;)t.__h.pop().call(t);H||o||h()}}function k(t,e,n,r){for(var o=t&&t._component,i=o,l=t,u=o&&t._componentConstructor===e.nodeName,a=u,f=c(e);o&&!a&&(o=o.__u);)a=o.constructor===e.nodeName;return o&&a&&(!r||o._component)?(j(o,f,3,n,r),t=o.base):(i&&!u&&(C(i),t=l=null),o=_(e.nodeName,f,n),t&&!o.__b&&(o.__b=t,l=null),j(o,f,1,n,r),t=o.base,l&&t!==l&&(l._component=null,v(l,!1))),t}function C(t){P.beforeUnmount&&P.beforeUnmount(t);var e=t.base;t.__x=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?C(n):e&&(null!=e.__preactattr_&&o(e.__preactattr_.ref,null),t.__b=e,f(e),D.push(t),g(e)),o(t.__r,null)}function x(t,e){this.__d=!0,this.context=e,this.props=t,this.state=this.state||{},this.__h=[]}var S=function(){},P={},T=[],E=[],B="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,N=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,A=[],I=[],H=0,U=!1,M=!1,D=[];n(x.prototype,{setState:function(t,e){this.__s||(this.__s=this.state),this.state=n(n({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this.__h.push(e),i(this)},forceUpdate:function(t){t&&this.__h.push(t),w(this,2)},render:function(){}});var F={h:e,createElement:e,cloneElement:function(t,r){return e(t.nodeName,n(n({},t.attributes),r),arguments.length>2?[].slice.call(arguments,2):t.children)},createRef:function(){return{}},Component:x,render:function(t,e,n){return y(n,t,{},!1,e,!1)},rerender:l,options:P};t.exports=F}()},function(t,e,n){function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=n(2).readFileSync,i=n(3),l=["·","×","—","‘","’","“","”","…","、","。","《","》","『","』","【","】","！","（","）","，","：","；","？"];e.loadFile=function(t){return e.load(o(t,"utf-8"))},e.load=function(t){var e=new i;return e.load(t),function(t){t=Array.from(t.replace(/\r/g,""));for(var n=[],o=0,i=0,u=1,a=1,c=0,f=0,s=function(t){var l=e.get(t,!1),s=e.get(t,!0),p=0===l.length?s:0===s.length?l:c<f?s:c>f?l:[].concat(r(l),r(s));0===s.length&&l.length>0?c++:0===l.length&&s.length>0&&f++,n.push({text:t,traditional:p[0]?p[0].traditional:t,simplified:p[0]?p[0].simplified:t,position:{offset:i,line:u,column:a},matches:p.map((function(t){return{pinyin:t.pinyin,pinyinPretty:t.pinyinPretty,english:t.english}}))});var h=Array.from(t),y=t.lastIndexOf("\n");o+=h.length,i+=t.length,u+=h.filter((function(t){return"\n"===t})).length,a=y>=0?t.length-y:a+t.length};o<t.length;){if(o!==t.length-1){for(var p=t.slice(o,o+2).join(""),h=e.getPrefix(p,!1),y=e.getPrefix(p,!0),d=null,b=null,v=0,g=[y,h];v<g.length;v++){var m=g[v],_=!0,O=!1,j=void 0;try{for(var w,k=m[Symbol.iterator]();!(_=(w=k.next()).done);_=!0){var C=w.value,x=m===y?C.traditional:C.simplified,S=t.slice(o,o+Array.from(x).length).join("");x===S&&(null==d||Array.from(S).length>Array.from(d).length)&&(d=S,b=m)}}catch(t){O=!0,j=t}finally{try{_||null==k.return||k.return()}finally{if(O)throw j}}}if(null!=d){s(d),b===h?c++:b===y&&f++;continue}}var P=t[o],T=function(t){return l.includes(t)||e.get(t,!1).length>0||e.get(t,!0).length>0};if(T(P)||null!=P.match(/\s/))s(P);else{for(var E=o+1;E<t.length&&(null==t[E].match(/\s/)&&!T(t[E]));E++);s(t.slice(o,E).join(""))}}return n}}},function(t,e){t.exports={}},function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var l,u=t[Symbol.iterator]();!(r=(l=u.next()).done)&&(n.push(l.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=n(4).prettify,l=n(5);function u(t){var e=t.match(/^(\S+)\s(\S+)\s\[([^\]]+)\]\s\/(.+)\//);if(null!=e){var n=o(e,5),r=n[1],l=n[2],u=n[3],a=n[4];return{traditional:r,simplified:l,pinyin:u=u.replace(/u:/g,"ü"),pinyinPretty:i(u),english:a}}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,(n=[{key:"load",value:function(t){this.simplifiedTrie=new l,this.traditionalTrie=new l;var e=t.split("\n"),n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;if(""!==c.trim()&&"#"!==c[0]){var f=u(c);null!=f&&(this.simplifiedTrie.push(f.simplified,f),this.traditionalTrie.push(f.traditional,f))}}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?this.traditionalTrie.get(t):this.simplifiedTrie.get(t)}},{key:"getPrefix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?this.traditionalTrie.getPrefix(t):this.simplifiedTrie.getPrefix(t)}}])&&r(e.prototype,n),o&&r(e,o),t}();t.exports=a},function(t,e){var n={a:["ā","á","ǎ","à"],e:["ē","é","ě","è"],u:["ū","ú","ǔ","ù"],i:["ī","í","ǐ","ì"],o:["ō","ó","ǒ","ò"],"ü":["ǖ","ǘ","ǚ","ǜ"]},r=["i","u","ü"];t.exports.prettify=function(t){for(var e=(t=t.replace("v","ü")).split(" "),o=0;o<e.length;o++){var i=e[o],l=parseInt(i[i.length-1]);if(l<=0||l>5)console.error("invalid tone number:",l,"in",i);else if(5===l)e[o]=i.slice(0,i.length-1);else for(var u=0;u<i.length;u++){var a=i[u],c=i[u+1];if(n[a]){var f,s;s=n[c]&&r.indexOf(a)>=0?c:a,f=i.replace(s,n[s][l-1]),e[o]=f.slice(0,f.length-1);break}}}return e.join(" ")}},function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.content={}}var e,o,i;return e=t,(o=[{key:"getKeyObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=""===(t=t.toString())?[t]:Array.from(t),r=this.content,o=!0,i=!1,l=void 0;try{for(var u,a=n[Symbol.iterator]();!(o=(u=a.next()).done);o=!0){var c=u.value;if(null==r[c]){if(!e)return{};r[c]={}}r=r[c]}}catch(t){i=!0,l=t}finally{try{o||null==a.return||a.return()}finally{if(i)throw l}}return r}},{key:"get",value:function(t){return this.getKeyObject(t).values||[]}},{key:"getPrefix",value:function(t){var e=this;return function t(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==o&&(o=e.getKeyObject(r));var i=o.values?n(o.values):[];for(var l in o)"values"!==l&&null!=o[l]&&i.push.apply(i,n(t(r+l,o[l])));return i}(t)}},{key:"push",value:function(t,e){var n=this.getKeyObject(t,!0);return null==n.values&&(n.values=[]),n.values.includes(e)||n.values.push(e),this}}])&&r(e.prototype,o),i&&r(e,i),t}();t.exports=o},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n(1),i=n.n(o),l=100,u={loading:0,cedictData:null,tokenize:null,input:"",type:"simplified",highlightHistory:[],highlightIndex:0};function a(t,e){if(null!=e&&null!=t.highlightHistory[t.highlightIndex]&&e.traditional===t.highlightHistory[t.highlightIndex].traditional)return{};var n=t.highlightHistory.slice(0,t.highlightIndex+1);return null!=e&&(n.length>=l&&n.shift(),n.push(e)),{highlightHistory:n,highlightIndex:null!=e?n.length-1:n.length}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,p(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,t),n=e,(o=[{key:"render",value:function(){var t=Math.round(100*this.props.progress);return Object(r.h)("section",{id:"load-screen"},Object(r.h)("div",{class:"throbber"}),Object(r.h)("p",{class:"progress"},t,"%"),Object(r.h)("p",{class:"text"},"Loading dictionary…"))}}])&&f(n.prototype,o),i&&f(n,i),e}(r.Component);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,g(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,t),n=e,(o=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return Object(r.h)("section",{id:"introduction"},Object(r.h)("h1",null,"Chinese Tokenizer"),Object(r.h)("p",null,["This is a tool that can tokenize Chinese texts into words using ",Object(r.h)("a",{href:"https://github.com/yishn/chinese-tokenizer"},"chinese-tokenizer")," and ",Object(r.h)("a",{href:"https://cc-cedict.org/"},"CC-CEDICT"),"."]),Object(r.h)("p",null,"Just paste your text down below:"))}}])&&b(n.prototype,o),i&&b(n,i),e}(r.Component);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x=function(t){function e(){var t,n,r,o,i,l,u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];return r=this,o=(t=w(e)).call.apply(t,[this].concat(c)),n=!o||"object"!==O(o)&&"function"!=typeof o?k(r):o,i=k(n),u=function(t){var e=n.props.onChange;(void 0===e?function(){}:e)({value:t.currentTarget.value})},(l="handleInput")in i?Object.defineProperty(i,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[l]=u,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(e,t),n=e,(o=[{key:"shouldComponentUpdate",value:function(t){return t.value!==this.props.value||t.onChange!==this.props.onChange}},{key:"render",value:function(){return Object(r.h)("section",{id:"text-input"},Object(r.h)("textarea",{autofocus:!0,value:this.props.value,onInput:this.handleInput}))}}])&&j(n.prototype,o),i&&j(n,i),e}(r.Component);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var N=function(t){function e(){var t,n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return r=this,o=(t=T(e)).call.apply(t,[this].concat(l)),n=!o||"object"!==S(o)&&"function"!=typeof o?E(r):o,function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(E(n),"handleClick",(function(t){t.preventDefault();var e=t.currentTarget.parentNode.dataset.value,r=n.props.onChange;(void 0===r?function(){}:r)({value:e})})),n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}(e,t),n=e,(o=[{key:"shouldComponentUpdate",value:function(t){return t.value!==this.props.value||t.onChange!==this.props.onChange}},{key:"render",value:function(){return Object(r.h)("section",{id:"type-chooser"},Object(r.h)("ul",null,Object(r.h)("li",{"data-value":"simplified",class:"simplified"===this.props.value?"current":""},Object(r.h)("a",{href:"#",onClick:this.handleClick},"Simplified")),Object(r.h)("li",{"data-value":"traditional",class:"traditional"===this.props.value?"current":""},Object(r.h)("a",{href:"#",onClick:this.handleClick},"Traditional"))))}}])&&P(n.prototype,o),i&&P(n,i),e}(r.Component);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var D=function(t){function e(){var t,n,r,o,i,l,u;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];return r=this,o=(t=H(e)).call.apply(t,[this].concat(c)),n=!o||"object"!==A(o)&&"function"!=typeof o?U(r):o,i=U(n),u=function(t){t.stopPropagation();var e=n.props,r=e.text,o=e.traditional,i=e.simplified,l=e.matches,u=e.type,a=e.onClick;(void 0===a?function(){}:a)({text:r,traditional:o,simplified:i,matches:l,type:u})},(l="handleClick")in i?Object.defineProperty(i,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[l]=u,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&M(t,e)}(e,t),n=e,(o=[{key:"shouldComponentUpdate",value:function(t){return t.traditional!==this.props.traditional||t.prefix!==this.props.prefix||t.suffix!==this.props.suffix||t.highlight!==this.props.highlight||t.type!==this.props.type}},{key:"render",value:function(){var t=Object(r.h)("span",{class:["word",this.props.highlight?"highlight":""].join(" ").trim(),"data-pinyin":this.props.matches.map((function(t){return t.pinyinPretty})).sort().filter((function(t,e,n){return 0===e||n[e-1]!==t})).join("/"),onClick:this.handleClick},this.props[this.props.type]);return""===this.props.prefix&&""===this.props.suffix?t:Object(r.h)("span",{class:"word-wrapper"},this.props.prefix,t,this.props.suffix)}}])&&I(n.prototype,o),i&&I(n,i),e}(r.Component);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(){return(L=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var G=["‘","“","《","『","【","（"],V=["’","”","》","』","】","）","、","，","…","。","：","；","！","？"],K=function(t,e){return null==t||null==e?t==e:t.text===e.text},q=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=R(this,$(e).call(this,t))).cache=[null,null],n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(e,t),n=e,(o=[{key:"shouldComponentUpdate",value:function(t){return!K(t.highlight,this.props.highlight)||t.value!==this.props.value||t.type!==this.props.type||t.onClick!==this.props.onClick||t.onTokenClick!==this.props.onTokenClick}},{key:"getProcessedTokens",value:function(){if(this.cache[0]===this.props.value)return this.cache[1];var t=[],e=this.props.tokenize(this.props.value),n=e.map((function(n,r){if(!G.includes(n.text)&&!V.includes(n.text)){for(var o="",i="",l=1;r+l<e.length&&V.includes(e[r+l].text);l++)i+=e[r+l].text,t.push(r+l);for(var u=1;r-u>=0&&G.includes(e[r-u].text);u++)o=e[r-u].text+o,t.push(r-u);return t.push(r),{token:n,prefix:o,suffix:i}}})).map((function(n,r){return null!=n||t.includes(r)?n:{token:e[r],prefix:"",suffix:""}})).filter((function(t){return!!t}));return this.cache=[this.props.value,n],n}},{key:"render",value:function(){var t=this,e=this.getProcessedTokens();return Object(r.h)("section",{id:"text-output",onClick:this.props.onClick},e.map((function(e){var n=e.token,o=e.prefix,i=e.suffix;return n.matches.length>0?Object(r.h)(D,L({},n,{highlight:K(n,t.props.highlight),type:t.props.type,prefix:o,suffix:i,onClick:t.props.onTokenClick})):""!==o||""!==i?Object(r.h)("span",null,o,"\n"===n.text?Object(r.h)("br",null):n.text,i):"\n"===n.text?Object(r.h)("br",null):n.text})))}}])&&z(n.prototype,o),i&&z(n,i),e}(r.Component);function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var et=function(t){function e(){var t,n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return r=this,o=(t=Q(e)).call.apply(t,[this].concat(l)),n=!o||"object"!==J(o)&&"function"!=typeof o?Y(r):o,tt(Y(n),"handleCloseClick",(function(t){t.preventDefault();var e=n.props.onCloseClick;(void 0===e?function(){}:e)()})),tt(Y(n),"handleBackButtonClick",(function(t){t.preventDefault();var e=n.props.onBackButtonClick;(void 0===e?function(){}:e)()})),tt(Y(n),"handleForwardButtonClick",(function(t){t.preventDefault();var e=n.props.onForwardButtonClick;(void 0===e?function(){}:e)()})),n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(e,t),n=e,(o=[{key:"shouldComponentUpdate",value:function(t){return e=t.data,n=this.props.data,!(null==e||null==n?e==n:e.traditional===n.traditional)||t.type!==this.props.type||t.enableBackButton!==this.props.enableBackButton||t.enableForwardButton!==this.props.enableForwardButton;var e,n}},{key:"createTokenHandler",value:function(t){var e=this;return function(n){n.preventDefault();var r=e.props.onTokenClick;(void 0===r?function(){}:r)(t)}}},{key:"render",value:function(){var t=this;if(null!=this.props.data){var e=this.props,n=e.tokenize,o=e.enableBackButton,i=e.enableForwardButton;return Object(r.h)("section",{id:"dictionary",class:"show"},Object(r.h)("h1",null,this.props.data[this.props.type]),Object(r.h)("ul",{class:"descriptions"},this.props.data.matches.map((function(e){return Object(r.h)("li",null,Object(r.h)("span",{class:"pinyin"},e.pinyinPretty)," ",n((o=e.english.replace(/\//g,", "),o.replace(/\.{3}/g,"…").replace(/(\S)('|´)/g,"$1’").replace(/(\S)"/g,"$1”").replace(/('|`)(\S)/g,"‘$2").replace(/"(\S)/g,"“$1").replace(/(\s)-(\s)/g,"$1–$2"))).map((function(e){return e.matches.length>0&&null==e.text.match(/^[a-z]$/i)?Object(r.h)("a",{href:"#",onClick:t.createTokenHandler(e)},e.text):e.text})));var o}))),Object(r.h)("ul",{class:"actions"},Object(r.h)("li",null,Object(r.h)("a",{class:o?"":"disabled",href:"#",onClick:this.handleBackButtonClick},"Back")),Object(r.h)("li",null,Object(r.h)("a",{class:i?"":"disabled",href:"#",onClick:this.handleForwardButtonClick},"Forward")),Object(r.h)("li",null,Object(r.h)("a",{href:"#",onClick:this.handleCloseClick},"Close"))))}}}])&&X(n.prototype,o),i&&X(n,i),e}(r.Component);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function it(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var at=function(t){function e(){var t,n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r=ot(e).call(this),t=!r||"object"!==nt(r)&&"function"!=typeof r?it(n):r,ut(it(t),"handleInputChange",(function(e){t.setState((function(t){return function(t,e){return e===t.input?{}:{input:e}}(t,e.value)}))})),ut(it(t),"handleTypeChooserChange",(function(e){t.setState((function(t){return function(t,e){return e===t.type?{}:{type:e}}(t,e.value)}))})),ut(it(t),"handleTokenClick",(function(e){t.setState((function(t){return a(t,e)}))})),ut(it(t),"handleGoBackHighlight",(function(e){t.setState((function(t){return function(t){return{highlightIndex:Math.max(t.highlightIndex-1,0)}}(t)}))})),ut(it(t),"handleGoForwardHighlight",(function(e){t.setState((function(t){return function(t){return{highlightIndex:Math.min(t.highlightIndex+1,t.highlightHistory.length-1)}}(t)}))})),ut(it(t),"handleClearHighlight",(function(e){t.setState((function(t){return function(t){return a(t,null)}(t)}))})),t.state=u,t}var n,o,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(e,t),n=e,(o=[{key:"componentDidMount",value:function(){var t=this,e=new XMLHttpRequest;e.addEventListener("progress",(function(e){if(e.lengthComputable){var n=e.loaded/e.total;t.setState((function(t){return function(t,e){return e===t.loading?{}:{loading:e}}(t,n)}))}})),e.addEventListener("load",(function(e){var n=e.currentTarget.responseText;t.setState((function(t){return{loading:1/0,cedictData:e=n,tokenize:i.a.load(e)};var e}))})),e.open("GET","./data/cedict_ts.u8"),e.send()}},{key:"render",value:function(){return Object(r.h)("section",{id:"root"},this.state.loading<=1&&Object(r.h)(y,{progress:this.state.loading}),this.state.loading>1&&Object(r.h)("main",null,Object(r.h)("div",{id:"input"},Object(r.h)(_,null),Object(r.h)(x,{value:this.state.input,onChange:this.handleInputChange})),Object(r.h)("div",{id:"output"},Object(r.h)(N,{value:this.state.type,onChange:this.handleTypeChooserChange}),Object(r.h)(q,{tokenize:this.state.tokenize,value:this.state.input,type:this.state.type,highlight:this.state.highlightHistory[this.state.highlightIndex],onClick:this.handleClearHighlight,onTokenClick:this.handleTokenClick}),Object(r.h)(et,{tokenize:this.state.tokenize,enableBackButton:this.state.highlightIndex>0,enableForwardButton:this.state.highlightIndex<this.state.highlightHistory.length-1,data:this.state.highlightHistory[this.state.highlightIndex],type:this.state.type,onTokenClick:this.handleTokenClick,onBackButtonClick:this.handleGoBackHighlight,onForwardButtonClick:this.handleGoForwardHighlight,onCloseClick:this.handleClearHighlight}))))}}])&&rt(n.prototype,o),l&&rt(n,l),e}(r.Component);Object(r.render)(Object(r.h)(at,null),document.body)}]);